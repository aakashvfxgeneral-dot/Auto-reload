<script>
setInterval(() => {
  let flag = localStorage.getItem("reloadFlag");

  if (flag === "yes") {
    localStorage.setItem("reloadFlag", "no");

    // mark that redirect should happen after reload
    localStorage.setItem("doRedirect", "yes");

    location.reload();
  }
}, 1000);

// AFTER reload
window.onload = () => {
  let shouldRedirect = localStorage.getItem("doRedirect");
  let target = localStorage.getItem("redirectURL");

  if (shouldRedirect === "yes" && target) {
    localStorage.setItem("doRedirect", "no");
    window.location.href = target;
  }
};
</script>
